<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transcriber</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&family=DM+Mono:wght@400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <!-- Decorative background -->
    <div class="bg-grain"></div>
    <div class="bg-gradient"></div>

    <header class="header">
      <div class="logo">
        <svg class="logo-icon" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="32" height="32" rx="8" fill="url(#logo-grad)"/>
          <path d="M8 18.5V13.5" stroke="white" stroke-width="2" stroke-linecap="round"/>
          <path d="M12 20V12" stroke="white" stroke-width="2" stroke-linecap="round"/>
          <path d="M16 22V10" stroke="white" stroke-width="2" stroke-linecap="round"/>
          <path d="M20 19V13" stroke="white" stroke-width="2" stroke-linecap="round"/>
          <path d="M24 17V15" stroke="white" stroke-width="2" stroke-linecap="round"/>
          <defs>
            <linearGradient id="logo-grad" x1="0" y1="0" x2="32" y2="32">
              <stop stop-color="#6366f1"/>
              <stop offset="1" stop-color="#8b5cf6"/>
            </linearGradient>
          </defs>
        </svg>
        <div class="logo-text">
          <h1>Transcriber</h1>
          <p class="tagline">Private, on-device audio transcription</p>
        </div>
      </div>
    </header>

    <main class="main">
      <!-- Model Selection Card -->
      <section class="card card-model">
        <div class="card-label">Model</div>
        <div class="model-row">
          <div class="select-wrap">
            <select id="model-select"></select>
            <svg class="select-chevron" viewBox="0 0 16 16" fill="none">
              <path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <button id="btn-download" class="btn btn-secondary" hidden>
            <svg viewBox="0 0 16 16" fill="none" width="14" height="14">
              <path d="M8 2v8m0 0l-3-3m3 3l3-3M3 13h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Download
          </button>
        </div>
      </section>

      <!-- File Selection -->
      <section class="card card-file">
        <div class="card-label">Audio Files</div>
        <button id="btn-select" class="drop-zone">
          <div class="drop-zone-inner">
            <svg class="drop-icon" viewBox="0 0 24 24" fill="none" width="28" height="28">
              <path d="M12 16V4m0 0L7 9m5-5l5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="drop-text">
              <strong>Choose files or drag and drop</strong>
              <small>MP3, WAV, FLAC, M4A, OGG, WebM, WMA, AAC &mdash; multiple files can be queued</small>
            </span>
          </div>
        </button>
        <div id="file-name" class="file-name" hidden></div>
        <ul id="queue-list" class="queue-list" hidden></ul>
        <div id="queue-summary" class="queue-summary" hidden></div>
      </section>

      <!-- Transcribe Action -->
      <button id="btn-transcribe" class="btn btn-primary btn-transcribe" disabled>
        <svg class="btn-icon" viewBox="0 0 20 20" fill="none" width="18" height="18">
          <path d="M10 3a7 7 0 00-7 7h2a5 5 0 0110 0h2a7 7 0 00-7-7z" fill="currentColor"/>
          <rect x="9" y="10" width="2" height="5" rx="1" fill="currentColor"/>
          <circle cx="10" cy="17" r="1" fill="currentColor"/>
        </svg>
        Transcribe
      </button>

      <!-- Time estimate banner -->
      <div class="estimate-banner" id="estimate-banner">
        <div class="estimate-banner-current" id="estimate-current">
          <svg class="estimate-banner-icon" viewBox="0 0 16 16" fill="none" width="14" height="14">
            <circle cx="8" cy="8" r="6.5" stroke="currentColor" stroke-width="1.5"/>
            <path d="M8 5v3.5l2.5 1.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span id="estimate-current-text"></span>
          <button class="estimate-expand-btn" id="estimate-expand-btn" type="button" aria-label="Show all estimates">
            <svg viewBox="0 0 16 16" fill="none" width="12" height="12">
              <path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
        <div class="estimate-all" id="estimate-all" hidden>
          <div class="estimate-all-header">Estimates for 45 min of audio</div>
          <div class="estimate-all-body" id="estimate-all-body"></div>
        </div>
      </div>

      <!-- Status -->
      <div id="status" class="status" hidden></div>
      <div id="elapsed-timer" class="elapsed-timer" hidden>
        <svg viewBox="0 0 16 16" fill="none" width="14" height="14">
          <circle cx="8" cy="8" r="6.5" stroke="currentColor" stroke-width="1.5"/>
          <path d="M8 5v3.5l2.5 1.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span id="elapsed-time">00:00</span>
      </div>

      <!-- Transcript Output -->
      <section class="card card-output" id="output-section" hidden>
        <div class="output-header">
          <div class="card-label">Transcript</div>
          <button id="btn-copy" class="btn btn-ghost btn-small" title="Copy to clipboard">
            <svg viewBox="0 0 16 16" fill="none" width="14" height="14">
              <rect x="5" y="5" width="9" height="9" rx="1.5" stroke="currentColor" stroke-width="1.5"/>
              <path d="M11 5V3.5A1.5 1.5 0 009.5 2h-6A1.5 1.5 0 002 3.5v6A1.5 1.5 0 003.5 11H5" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            Copy
          </button>
        </div>
        <div id="diarize-info" class="diarize-info" hidden></div>
        <textarea id="transcript" placeholder="Transcript will appear here..." readonly></textarea>
        <button id="btn-save" class="btn btn-secondary btn-save" disabled>
          <svg viewBox="0 0 16 16" fill="none" width="14" height="14">
            <path d="M13 11v2.5a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5V11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M4.5 7L8 10.5 11.5 7M8 10V2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Save as File
        </button>
      </section>
    </main>

    <footer class="footer">
      Powered by whisper.cpp, FFmpeg &amp; Electron &mdash;
      <a href="#" id="btn-licenses">Open Source Licenses</a>
    </footer>

    <div class="license-overlay" id="license-overlay" hidden>
      <div class="license-modal">
        <div class="license-modal-header">
          <span class="license-modal-title">Open Source Licenses</span>
          <button class="btn btn-ghost btn-small" id="btn-close-licenses" type="button">&times;</button>
        </div>
        <div class="license-modal-body" id="license-modal-body"></div>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
